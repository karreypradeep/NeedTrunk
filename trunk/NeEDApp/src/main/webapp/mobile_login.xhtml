
<f:view xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui"
	xmlns:pm="http://primefaces.org/mobile" contentType="text/html" renderKitId="PRIMEFACES_MOBILE">
	<ui:composition template="/templates/mobile.xhtml">

		<f:metadata>
			<f:event type="preRenderView" listener="#{loginBean.loadBranchs}" />
		</f:metadata>

		<ui:define name="body">
			<div>

				<p:focus />
				<p:messages id="messages" autoUpdate="true" />
				<p:spacer height="100" />
				<center>
					<h:panelGrid columns="2" style="width:50%" cellpadding="10" cellspacing="10">

						<p:outputLabel id="username_label" value="Username *" rendered="#{!loginBean.loggedIn}" />
						<p:inputText id="username" value="#{loginBean.username}" rendered="#{!loginBean.loggedIn}" required="true" />

						<p:outputLabel id="password_label" value="Password" for="password" rendered="#{!loginBean.loggedIn}"  />
						<p:password label="Password" id="password" value="#{loginBean.password}" required="true"
							rendered="#{!loginBean.loggedIn}" size="40" />

						<p:outputLabel id="organization_unit_label" value="Branch" rendered="#{loginBean.accessingBranch}" for="branch"  />
						<p:selectOneMenu id="branch" value="#{loginBean.branchId}" rendered="#{loginBean.accessingBranch}" required="true"
							style="width:100%;min-width:184px;">
							<f:selectItem itemLabel="Select organization unit" itemValue="" />
							<f:selectItems value="#{loginBean.branchs}" var="ou" itemLabel="#{ou.name}" itemValue="#{ou.id}" />
						</p:selectOneMenu>
					</h:panelGrid>

					<h:panelGrid id="grid1" columns="2" style="width:30%" cellpadding="5" cellspacing="5">

						<p:commandButton id="login_button"
							value="#{loginBean.accessingBranch and loginBean.loggedIn ? 'Submit' : 'Login'}" action="${loginBean.login}"
							update="@form" icon="ui-icon-circle-check" />

						<p:commandButton id="reset_cancel" value="Cancel" action="home" process="@this" update="@form"
							icon="ui-icon-circle-close" />
					</h:panelGrid>
				</center>
				<p:defaultCommand target="login_button" />
			</div>
		</ui:define>
	</ui:composition>
</f:view>