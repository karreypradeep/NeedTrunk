<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

	<p:dataTable id="status_table" var="reportCardDO" value="#{studentReportCardBean.reportCardDOs}"
		style="margin-top:10px;">

		<p:column headerText="Report card name">
			<p:commandLink value="#{reportCardDO.reportCard.name}" oncomplete="actionDialog.show()" update="@form"
				action="#{studentReportCardBean.buildExamResultsTreeTable}">
				<f:setPropertyActionListener target="#{studentReportCardBean.selectedReportCardDO}" value="#{reportCardDO}" />
			</p:commandLink>
		</p:column>

		<p:column headerText="Date">
			<h:outputText value="#{reportCardDO.reportCard.academicYear.displayLabel}">
			</h:outputText>
		</p:column>

		<p:column headerText="Total percentage">
			<h:outputText value="#{reportCardDO.totalPercentageForReportCard}">
			</h:outputText>
		</p:column>

		<p:column headerText="Percentage scored">
			<h:outputText value="#{reportCardDO.scoredPercentageForReportCard}">
			</h:outputText>
		</p:column>

		<p:column headerText="Grade">
			<h:outputText value="#{reportCardDO.gradeForReportCard}">
			</h:outputText>
		</p:column>

		<p:column headerText="Result">
			<h:outputText value="#{reportCardDO.studentReportCardResult.label}">
			</h:outputText>
		</p:column>

	</p:dataTable>


	<p:dialog header="Report card : #{studentReportCardBean.selectedReportCardDO.reportCard.name}" widgetVar="actionDialog"
		resizable="false" showEffect="explode" hideEffect="explode" width="800">


		<p:treeTable value="#{studentReportCardBean.root}" var="examSubjectResultTreeNode">
			<p:column headerText="Exam name">
				<h:outputText value="#{examSubjectResultTreeNode.name}">
				</h:outputText>
			</p:column>

			<p:column headerText="Total percentage">
				<h:outputText value="#{examSubjectResultTreeNode.totalPercentage}">
				</h:outputText>
			</p:column>

			<p:column headerText="Exam status">
				<h:outputText value="#{examSubjectResultTreeNode.status}">
				</h:outputText>
			</p:column>

			<p:column headerText="Scored percentage">
				<h:outputText value="#{examSubjectResultTreeNode.percentageScored}">
				</h:outputText>
			</p:column>

			<p:column headerText="Result">
				<h:outputText value="#{examSubjectResultTreeNode.studentSubjectExamResult.label}">
				</h:outputText>
			</p:column>

		</p:treeTable>

	</p:dialog>


</ui:composition>