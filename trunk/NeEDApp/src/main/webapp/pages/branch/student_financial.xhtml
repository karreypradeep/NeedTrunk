
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:p="http://primefaces.org/ui"
	xmlns:biz="http://java.sun.com/jsf/composite/apeironsol-components">

	<p:dataTable id="studentFeeTable" var="studentFee" value="#{studentFinancialBean.studentFinancialDOs}">

		<f:facet name="header">
			<span style="float: right; font-size: 20px;"> <strong>Total fee : 
					<h:outputLabel value="">
						<f:convertNumber pattern="000.00" />
					</h:outputLabel></strong></span>
		</f:facet>

		<p:column style="width:16px">
			<p:rowToggler />
		</p:column>

		<p:column>
			<f:facet name="header">
				<h:outputLabel value="Fee" />
			</f:facet>
			<center>
				<h:outputLabel value="#{studentFee.studentFee.klassFee.buildingBlock.name}" />
			</center>
		</p:column>

		<p:column>
			<f:facet name="header">
				<h:outputLabel value="Payment frequency" />
			</f:facet>
			<center>
				<h:outputLabel value="#{studentFee.studentFee.klassFee.paymentFrequency.label}" />
			</center>
		</p:column>


		<p:column style="width:100px;text-align:right;">
			<f:facet name="header">
				<h:outputLabel value="Total Amount" />
			</f:facet>
			<h:outputLabel value="#{studentFee.fee}">
				<f:convertNumber pattern="0.00" />
			</h:outputLabel>
		</p:column>

		<p:column style="width:100px;text-align:right;">
			<f:facet name="header">
				<h:outputLabel value="Total Amount paid" />
			</f:facet>
			<h:outputLabel value="#{studentFee.totalFeePaymentAmount}">
				<f:convertNumber pattern="0.00" />
			</h:outputLabel>
		</p:column>

		<p:column style="width:100px;text-align:right;">
			<f:facet name="header">
				<h:outputLabel value="Total Amount due" />
			</f:facet>
			<h:outputLabel value="#{studentFee.totalFeeDueAmount}">
				<f:convertNumber pattern="0.00" />
			</h:outputLabel>
		</p:column>

		<p:rowExpansion>

			<table border="0">
				<thead>
					<tr>
						<th>Payment date</th>
						<th>Due date</th>
						<th>Total amount</th>
						<th>Total paid</th>
						<th>Total due</th>
					</tr>
				</thead>
				<tbody>
					<ui:repeat var="studentFeeTransaction" value="#{studentFee.studentFeeDetailsDOs}">
						<tr style="border: 0px;">
							<td style="border: 0px; text-align: center;"><h:outputLabel
									value="#{studentFeeTransaction.klassFeePayment.paymentDate}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputLabel></td>

							<td style="border: 0px; text-align: center;"><h:outputLabel
									value="#{studentFeeTransaction.klassFeePayment.dueDate}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputLabel>
							</td>
							
							<td style="border: 0px; text-align: center;"><h:outputLabel value="#{studentFeeTransaction.fee}">
									<f:convertNumber pattern="000.00" />
								</h:outputLabel>
							</td>
							
							<td style="border: 0px; text-align: center;"><h:outputLabel value="#{studentFeeTransaction.feePaid}">
									<f:convertNumber pattern="000.00" />
								</h:outputLabel>
							</td>

							<td style="border: 0px; text-align: center;"><h:outputLabel value="#{studentFeeTransaction.feeDue}">
									<f:convertNumber pattern="000.00" />
								</h:outputLabel>
							</td>

						</tr>
					</ui:repeat>
				</tbody>
			</table>

		</p:rowExpansion>

	</p:dataTable>

</ui:composition>